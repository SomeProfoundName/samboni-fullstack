---
const {title, image, description, imageAlt, variantId, availableForSale = true, quantityAvailable = 0, handle} = Astro.props
---

<div class="card bg-base-300 shadow-sm h-full flex flex-col border-4 border-base-300">
  <figure class="aspect-square overflow-hidden">
    <img
      class="w-full h-full object-cover"
      src={image || "https://img.daisyui.com/images/stock/photo-1606107557195-0e29a4b5b4aa.webp"}
      alt={imageAlt || "Product image"}/>
  </figure>
  <div class="card-body p-3 sm:p-4 flex-1 flex flex-col">
    <h2 class="card-title text-sm sm:text-base line-clamp-2">{title || "Painting"}</h2>
    <p class="text-xs sm:text-sm text-gray-600 line-clamp-2 flex-1">{description || "A card component has a figure, a body part, and inside body there are title and actions parts"}</p>
    <div class="card-actions justify-end mt-2">
      {availableForSale && quantityAvailable > 0 && (
      <p class="text-xs text-gray-500 mt-1">
        Stock: <span class={quantityAvailable <= 5 ? 'text-warning font-semibold' : 'text-success'}>{quantityAvailable} available</span>
      </p>
    )}
    <div class="flex flex-col md:flex-row gap-2">
    <a href={`/products/${handle}`} class="btn btn-xs md:btn-sm btn-success">Learn More</a>
      <button
        class={`btn btn-xs md:btn-sm ${availableForSale ? 'btn-info' : 'btn-neutral pointer-events-none'} add-to-cart-btn`}
        data-variant-id={variantId}
        disabled={!availableForSale}>
        {availableForSale ? 'Add to Cart' : 'Out of Stock'}
      </button>
      </div>
    </div>
  </div>
</div>