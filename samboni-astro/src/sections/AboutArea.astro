---
import { getAboutPage } from '../util/getAboutPage';
import RichText from '../components/RichText.astro';

const { videos, content } = await getAboutPage();
const video1 = videos[0]?.path || '/videos/video1.mp4';
const video2 = videos[1]?.path || '/videos/video2.mp4';
---

<section class="w-full h-full bg-base-300">
  <div>
    <div class="relative mt-[-5vw]">
      <svg class="absolute w-0 h-0" aria-hidden="true">
        <defs>
          <clipPath id="wave-clip-1" clipPathUnits="objectBoundingBox">
            <path d="M0,0 v0.901 l0.0128,0.00556 c0.0129,0.00536,0.0385,0.0165,0.0642,0.01463 c0.0257,-0.00165,0.0513,-0.01607,0.077,-0.00886 s0.0513,0.03606,0.077,0.03874 c0.0257,0.00288,0.0513,-0.02061,0.077,-0.02081 c0.0257,-0.00041,0.0513,0.02226,0.077,0.01978 c0.0257,-0.00227,0.0513,-0.02988,0.0768,-0.04533 s0.0509,-0.01875,0.0764,-0.0136 s0.0511,0.01875,0.0768,0.02947 s0.0513,0.01814,0.077,0.01752 s0.0513,-0.00969,0.077,-0.01896 s0.0513,-0.01875,0.077,-0.01401 s0.0513,0.02411,0.077,0.04225 s0.0513,0.03545,0.0642,0.0439 l0.0128,0.00866 V0 H0 Z"/>
          </clipPath>
        </defs>
      </svg>

      <div id="video1" class="w-full relative">
        <div class="w-full relative overflow-hidden video-mask-container-one">
          <video
            autoplay
            muted
            loop
            playsinline
            class="w-full h-full object-cover">
            <source src={video1} type="video/mp4"/>
          </video>
        </div>
      </div>
    </div>

    <div class="h-auto my-20">
      <div class="flex flex-col gap-5 container prose prose-lg max-w-none text-center md:text-xl font-bold">
        {content && <RichText content={content} />}
      </div>
    </div>

    <div class="relative mb-[-6vw] sm:mb-[-6vw] md:mb-[-4vw]">
      <svg class="absolute w-0 h-0" aria-hidden="true">
        <defs>
          <clipPath id="wave-clip-2" clipPathUnits="objectBoundingBox">
            <path d="M0,1 V0.0602 l0.0152,-0.00474 c0.0151,-0.00495,0.0455,-0.01443,0.0758,-0.01958 s0.0607,-0.00598,0.091,-0.00762 c0.0303,-0.00165,0.0607,-0.00453,0.091,-0.00969,0.0303,-0.00515,0.0607,-0.01257,0.091,-0.01298,0.0303,-0.00041,0.0607,0.00659,0.0908,0.00618,0.0302,-0.00041,0.0602,-0.00783,0.0904,-0.01071,0.0301,-0.00268,0.0605,-0.00062,0.0908,0.00866 s0.0607,0.02576,0.091,0.03133 c0.0303,0.00536,0.0607,0,0.091,-0.00289,0.0303,-0.00268,0.0607,-0.00268,0.091,-0.00742,0.0303,-0.00495,0.0607,-0.01443,0.0758,-0.01937 l0.0152,-0.00474 v0.99334 H0 Z"/>
          </clipPath>
        </defs>
      </svg>

      <div id="video2" class="w-full relative">
        <div class="w-full relative overflow-hidden video-mask-container-two">
          <video
            autoplay
            muted
            loop
            playsinline
            class="w-full h-full object-cover">
            <source src={video2} type="video/mp4"/>
          </video>
        </div>
      </div>
    </div>
  </div>

</section>

<style>
  .video-mask-container-one {
    clip-path: url(#wave-clip-1);
    aspect-ratio: 1000 / 300;
  }

  .video-mask-container-two {
    clip-path: url(#wave-clip-2);
    aspect-ratio: 1000 / 300;
  }
</style>

